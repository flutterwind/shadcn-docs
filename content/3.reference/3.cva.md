---
title: Class Variance Authority
description: Build your own variant-driven components with CVA for Dart.
icon: 'lucide:layers'
---

## What is CVA?

shadcn-flutter includes a Dart port of [Class Variance Authority (CVA)](https://cva.style/) — the same pattern used in shadcn/ui for building variant-driven component APIs.

CVA lets you define a mapping of variant values to utility classes, then resolve the final class string at runtime.

## Basic Usage

```dart [example.dart]
import 'package:shadcn_flutter/shadcn_flutter.dart';

final alertConfig = CvaConfig(
  base: 'relative w-full rounded-lg border p-4',
  variants: {
    'variant': {
      'default': 'bg-background text-foreground',
      'destructive': 'border-destructive/50 text-destructive dark:border-destructive',
    },
  },
  defaultVariants: {
    'variant': 'default',
  },
);
```

## Resolving Classes

```dart [example.dart]
// Uses default variant
final classes1 = cva(alertConfig);
// → 'relative w-full rounded-lg border p-4 bg-background text-foreground'

// Explicit variant
final classes2 = cva(alertConfig, values: {'variant': 'destructive'});
// → 'relative w-full rounded-lg border p-4 border-destructive/50 text-destructive dark:border-destructive'

// With additional className
final classes3 = cva(alertConfig, values: {'variant': 'default'}, className: 'mt-4');
// → 'relative w-full rounded-lg border p-4 bg-background text-foreground mt-4'
```

## Multiple Variant Axes

```dart [example.dart]
final buttonConfig = CvaConfig(
  base: 'inline-flex items-center justify-center rounded-md text-sm font-medium',
  variants: {
    'variant': {
      'default': 'bg-primary text-primary-foreground hover:bg-primary/90',
      'outline': 'border border-input bg-background hover:bg-accent',
      'ghost': 'hover:bg-accent hover:text-accent-foreground',
    },
    'size': {
      'default': 'h-9 px-4 py-2',
      'sm': 'h-8 rounded-md px-3 text-xs',
      'lg': 'h-10 rounded-md px-8',
    },
  },
  defaultVariants: {
    'variant': 'default',
    'size': 'default',
  },
);

final classes = cva(buttonConfig, values: {'variant': 'outline', 'size': 'sm'});
// → 'inline-flex items-center ... border border-input bg-background hover:bg-accent h-8 rounded-md px-3 text-xs'
```

## Compound Variants

Apply additional classes when specific variant combinations are active:

```dart [example.dart]
final config = CvaConfig(
  base: 'rounded-md p-4',
  variants: {
    'variant': {
      'default': 'bg-background',
      'destructive': 'bg-destructive',
    },
    'size': {
      'sm': 'text-sm',
      'lg': 'text-lg',
    },
  },
  defaultVariants: {'variant': 'default', 'size': 'sm'},
  compoundVariants: [
    CompoundVariant(
      when: {'variant': 'destructive', 'size': 'lg'},
      className: 'font-bold uppercase',
    ),
  ],
);

// Only 'destructive' + 'lg' triggers the compound
final classes = cva(config, values: {'variant': 'destructive', 'size': 'lg'});
// → 'rounded-md p-4 bg-destructive text-lg font-bold uppercase'
```

## Building Custom Components

Use CVA to build your own variant-driven widgets:

```dart [example.dart]
final _alertCva = CvaConfig(
  base: 'relative w-full rounded-lg border px-4 py-3 text-sm',
  variants: {
    'variant': {
      'default': 'bg-background text-foreground',
      'destructive': 'border-destructive/50 text-destructive',
      'success': 'border-green-500/50 text-green-700 bg-green-50',
    },
  },
  defaultVariants: {'variant': 'default'},
);

class Alert extends StatelessWidget {
  final Widget child;
  final String variant;
  final String? className;

  const Alert({
    required this.child,
    this.variant = 'default',
    this.className,
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    final classes = cva(_alertCva, values: {'variant': variant}, className: className);
    return Container(child: child).className(classes);
  }
}
```

## API Reference

### CvaConfig

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `base` | `String` | — | Base utility classes (required) |
| `variants` | `Map<String, Map<String, String>>` | `{}` | Variant axis → value → classes |
| `defaultVariants` | `Map<String, String>` | `{}` | Default values for each axis |
| `compoundVariants` | `List<CompoundVariant>` | `[]` | Conditional compound classes |

### cva()

```dart
String cva(CvaConfig config, {Map<String, String>? values, String? className})
```

Returns the resolved class string by merging base + variant classes + compound variants + additional className.
